collection:

  # create new session and run in background
  - pattern: "/github"
    pipeline:

      - type: plugin
        path: ./ci-Linux-x86_64.so
        name: SessionRun

  # container map by session id
  - pattern: "/sessions/{session:*}/map"
    pipeline:

      - type: process
        cmd: cat /bmpci/sessions/{{url "session"}}/map

  # log by container id
  - pattern: "/containers/{container:*}/log"
    pipeline:

      - type: process
        cmd: cat /bmpci/log/{{url "container"}}.log

  # Route
  # AWS ECS ping
  - pattern: "/ping"
    pipeline:

      - type: process
        cmd: echo pong
